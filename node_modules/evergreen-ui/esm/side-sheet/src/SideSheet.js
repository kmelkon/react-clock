import _extends from "@babel/runtime/helpers/esm/extends";
import _classCallCheck from "@babel/runtime/helpers/esm/classCallCheck";
import _createClass from "@babel/runtime/helpers/esm/createClass";
import _possibleConstructorReturn from "@babel/runtime/helpers/esm/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime/helpers/esm/getPrototypeOf";
import _inherits from "@babel/runtime/helpers/esm/inherits";
import _objectSpread from "@babel/runtime/helpers/esm/objectSpread";
import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";

var _paneProps, _subpaneProps, _animationStyles;

import React from 'react';
import PropTypes from 'prop-types';
import { css } from 'ui-box';
import { Pane } from '../../layers';
import { Overlay } from '../../overlay';
import { Position } from '../../constants';
import SheetClose from './SheetClose';
var paneProps = (_paneProps = {}, _defineProperty(_paneProps, Position.LEFT, {
  height: '100vh',
  maxWidth: '100vw',
  position: 'absolute',
  left: 0,
  right: 'auto'
}), _defineProperty(_paneProps, Position.RIGHT, {
  height: '100vh',
  maxWidth: '100vw',
  position: 'absolute',
  right: 0,
  left: 'auto'
}), _defineProperty(_paneProps, Position.TOP, {
  width: '100vw',
  position: 'absolute',
  maxHeight: '100vh',
  top: 0,
  bottom: 'auto'
}), _defineProperty(_paneProps, Position.BOTTOM, {
  width: '100vw',
  maxHeight: '100vh',
  position: 'absolute',
  bottom: 0,
  top: 'auto'
}), _paneProps);
var subpaneProps = (_subpaneProps = {}, _defineProperty(_subpaneProps, Position.LEFT, {
  height: '100vh'
}), _defineProperty(_subpaneProps, Position.RIGHT, {
  height: '100vh'
}), _defineProperty(_subpaneProps, Position.TOP, {
  width: '100vw'
}), _defineProperty(_subpaneProps, Position.BOTTOM, {
  width: '100vw'
}), _subpaneProps);
var animationEasing = {
  deceleration: "cubic-bezier(0.0, 0.0, 0.2, 1)",
  acceleration: "cubic-bezier(0.4, 0.0, 1, 1)"
};
var ANIMATION_DURATION = 240;

var withAnimations = function withAnimations(animateIn, animateOut) {
  return {
    '&[data-state="entering"], &[data-state="entered"]': {
      animation: "".concat(animateIn, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.deceleration, " both")
    },
    '&[data-state="exiting"]': {
      animation: "".concat(animateOut, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.acceleration, " both")
    }
  };
};

var animationStyles = (_animationStyles = {}, _defineProperty(_animationStyles, Position.LEFT, _objectSpread({
  transform: "translateX(-100%)"
}, withAnimations(css.keyframes('anchoredLeftSlideInAnimation', {
  from: {
    transform: "translateX(-100%)"
  },
  to: {
    transform: "translateX(0)"
  }
}), css.keyframes('anchoredLeftSlideOutAnimation', {
  from: {
    transform: "translateX(0)"
  },
  to: {
    transform: "translateX(-100%)"
  }
})))), _defineProperty(_animationStyles, Position.RIGHT, _objectSpread({
  transform: "translateX(100%)"
}, withAnimations(css.keyframes('anchoredRightSlideInAnimation', {
  from: {
    transform: "translateX(100%)"
  },
  to: {
    transform: "translateX(0)"
  }
}), css.keyframes('anchoredRightSlideOutAnimation', {
  from: {
    transform: "translateX(0)"
  },
  to: {
    transform: "translateX(100%)"
  }
})))), _defineProperty(_animationStyles, Position.TOP, _objectSpread({
  transform: "translateY(-100%)"
}, withAnimations(css.keyframes('anchoredTopSlideInAnimation', {
  from: {
    transform: "translateY(-100%)"
  },
  to: {
    transform: "translateY(0)"
  }
}), css.keyframes('anchoredTopSlideOutAnimation', {
  from: {
    transform: "translateY(0)"
  },
  to: {
    transform: "translateY(-100%)"
  }
})))), _defineProperty(_animationStyles, Position.BOTTOM, _objectSpread({
  transform: "translateY(100%)"
}, withAnimations(css.keyframes('anchoredBottomSlideInAnimation', {
  from: {
    transform: "translateY(100%)"
  },
  to: {
    transform: "translateY(0)"
  }
}), css.keyframes('anchoredBottomSlideOutAnimation', {
  from: {
    transform: "translateY(0)"
  },
  to: {
    transform: "translateY(100%)"
  }
})))), _animationStyles);

var SideSheet =
/*#__PURE__*/
function (_React$Component) {
  _inherits(SideSheet, _React$Component);

  function SideSheet() {
    _classCallCheck(this, SideSheet);

    return _possibleConstructorReturn(this, _getPrototypeOf(SideSheet).apply(this, arguments));
  }

  _createClass(SideSheet, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          width = _this$props.width,
          isShown = _this$props.isShown,
          children = _this$props.children,
          containerProps = _this$props.containerProps,
          onOpenComplete = _this$props.onOpenComplete,
          onCloseComplete = _this$props.onCloseComplete,
          onBeforeClose = _this$props.onBeforeClose,
          shouldCloseOnOverlayClick = _this$props.shouldCloseOnOverlayClick,
          shouldCloseOnEscapePress = _this$props.shouldCloseOnEscapePress,
          position = _this$props.position;
      return React.createElement(Overlay, {
        isShown: isShown,
        shouldCloseOnClick: shouldCloseOnOverlayClick,
        shouldCloseOnEscapePress: shouldCloseOnEscapePress,
        onBeforeClose: onBeforeClose,
        onExited: onCloseComplete,
        onEntered: onOpenComplete
      }, function (_ref) {
        var state = _ref.state,
            close = _ref.close;
        return React.createElement(Pane, _extends({
          width: width
        }, paneProps[position], {
          css: animationStyles[position],
          "data-state": state
        }), React.createElement(SheetClose, {
          position: position,
          "data-state": state,
          isClosing: false,
          onClick: close
        }), React.createElement(Pane, _extends({
          elevation: 4,
          backgroundColor: "white",
          overflowY: "auto",
          maxHeight: "100vh",
          "data-state": state,
          width: width
        }, subpaneProps[position], containerProps), typeof children === 'function' ? children({
          close: close
        }) : children));
      });
    }
  }]);

  return SideSheet;
}(React.Component);

SideSheet.displayName = "SideSheet";

_defineProperty(SideSheet, "propTypes", {
  /**
   * Children can be a string, node or a function accepting `({ close })`.
   */
  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,

  /**
   * When true, the Side Sheet is shown.
   */
  isShown: PropTypes.bool,

  /**
   * Function that will be called when the exit transition is complete.
   */
  onCloseComplete: PropTypes.func,

  /**
   * Function that will be called when the enter transition is complete.
   */
  onOpenComplete: PropTypes.func,

  /**
   * Function called when overlay is about to close.
   * Return `false` to prevent the sheet from closing.
   * type: `Function -> Boolean`
   */
  onBeforeClose: PropTypes.func,

  /**
   * Boolean indicating if clicking the overlay should close the overlay.
   */
  shouldCloseOnOverlayClick: PropTypes.bool,

  /**
   * Boolean indicating if pressing the esc key should close the overlay.
   */
  shouldCloseOnEscapePress: PropTypes.bool,

  /**
   * Width of the SideSheet.
   */
  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,

  /**
   * Properties to pass through the SideSheet container Pane.
   */
  containerProps: PropTypes.object,

  /**
   * Positions the sheet to the top, left, right, or bottom of the screen.
   */
  position: PropTypes.oneOf([Position.TOP, Position.BOTTOM, Position.LEFT, Position.RIGHT]).isRequired
});

_defineProperty(SideSheet, "defaultProps", {
  width: 620,
  onCloseComplete: function onCloseComplete() {},
  onOpenComplete: function onOpenComplete() {},
  shouldCloseOnOverlayClick: true,
  shouldCloseOnEscapePress: true,
  position: Position.RIGHT
});

export default SideSheet;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXNoZWV0L3NyYy9TaWRlU2hlZXQuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJQcm9wVHlwZXMiLCJjc3MiLCJQYW5lIiwiT3ZlcmxheSIsIlBvc2l0aW9uIiwiU2hlZXRDbG9zZSIsInBhbmVQcm9wcyIsIkxFRlQiLCJoZWlnaHQiLCJtYXhXaWR0aCIsInBvc2l0aW9uIiwibGVmdCIsInJpZ2h0IiwiUklHSFQiLCJUT1AiLCJ3aWR0aCIsIm1heEhlaWdodCIsInRvcCIsImJvdHRvbSIsIkJPVFRPTSIsInN1YnBhbmVQcm9wcyIsImFuaW1hdGlvbkVhc2luZyIsImRlY2VsZXJhdGlvbiIsImFjY2VsZXJhdGlvbiIsIkFOSU1BVElPTl9EVVJBVElPTiIsIndpdGhBbmltYXRpb25zIiwiYW5pbWF0ZUluIiwiYW5pbWF0ZU91dCIsImFuaW1hdGlvbiIsImFuaW1hdGlvblN0eWxlcyIsInRyYW5zZm9ybSIsImtleWZyYW1lcyIsImZyb20iLCJ0byIsIlNpZGVTaGVldCIsInByb3BzIiwiaXNTaG93biIsImNoaWxkcmVuIiwiY29udGFpbmVyUHJvcHMiLCJvbk9wZW5Db21wbGV0ZSIsIm9uQ2xvc2VDb21wbGV0ZSIsIm9uQmVmb3JlQ2xvc2UiLCJzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrIiwic2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzIiwic3RhdGUiLCJjbG9zZSIsIkNvbXBvbmVudCIsIm9uZU9mVHlwZSIsIm5vZGUiLCJmdW5jIiwiaXNSZXF1aXJlZCIsImJvb2wiLCJzdHJpbmciLCJudW1iZXIiLCJvYmplY3QiLCJvbmVPZiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxPQUFPQSxLQUFQLE1BQWtCLE9BQWxCO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixZQUF0QjtBQUNBLFNBQVNDLEdBQVQsUUFBb0IsUUFBcEI7QUFDQSxTQUFTQyxJQUFULFFBQXFCLGNBQXJCO0FBQ0EsU0FBU0MsT0FBVCxRQUF3QixlQUF4QjtBQUNB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MUMsU0FBUyxDQUFDbUQsSUEvQnBCOztBQWlDakI7OztBQUdBUixFQUFBQSx3QkFBd0IsRUFBRTNDLFNBQVMsQ0FBQ21ELElBcENuQjs7QUFzQ2pCOzs7QUFHQXBDLEVBQUFBLEtBQUssRUFBRWYsU0FBUyxDQUFDK0MsU0FBVixDQUFvQixDQUFDL0MsU0FBUyxDQUFDb0QsTUFBWCxFQUFtQnBELFNBQVMsQ0FBQ3FELE1BQTdCLENBQXBCLEVBQTBESCxVQXpDaEQ7O0FBMkNqQjs7O0FBR0FaLEVBQUFBLGNBQWMsRUFBRXRDLFNBQVMsQ0FBQ3NELE1BOUNUOztBQWdEakI7OztBQUdBNUMsRUFBQUEsUUFBUSxFQUFFVixTQUFTLENBQUN1RCxLQUFWLENBQWdCLENBQ3hCbkQsUUFBUSxDQUFDVSxHQURlLEVBRXhCVixRQUFRLENBQUNlLE1BRmUsRUFHeEJmLFFBQVEsQ0FBQ0csSUFIZSxFQUl4QkgsUUFBUSxDQUFDUyxLQUplLENBQWhCLEVBS1BxQztBQXhEYyxDOztnQkFEZmhCLFMsa0JBNERrQjtBQUNwQm5CLEVBQUFBLEtBQUssRUFBRSxHQURhO0FBRXBCeUIsRUFBQUEsZUFBZSxFQUFFLDJCQUFNLENBQUUsQ0FGTDtBQUdwQkQsRUFBQUEsY0FBYyxFQUFFLDBCQUFNLENBQUUsQ0FISjtBQUlwQkcsRUFBQUEseUJBQXlCLEVBQUUsSUFKUDtBQUtwQkMsRUFBQUEsd0JBQXdCLEVBQUUsSUFMTjtBQU1wQmpDLEVBQUFBLFFBQVEsRUFBRU4sUUFBUSxDQUFDUztBQU5DLEM7O0FBZ0V4QixlQUFlcUIsU0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCB7IGNzcyB9IGZyb20gJ3VpLWJveCdcbmltcG9ydCB7IFBhbmUgfSBmcm9tICcuLi8uLi9sYXllcnMnXG5pbXBvcnQgeyBPdmVybGF5IH0gZnJvbSAnLi4vLi4vb3ZlcmxheSdcbmltcG9ydCB7IFBvc2l0aW9uIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJ1xuaW1wb3J0IFNoZWV0Q2xvc2UgZnJvbSAnLi9TaGVldENsb3NlJ1xuXG5jb25zdCBwYW5lUHJvcHMgPSB7XG4gIFtQb3NpdGlvbi5MRUZUXToge1xuICAgIGhlaWdodDogJzEwMHZoJyxcbiAgICBtYXhXaWR0aDogJzEwMHZ3JyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAnYXV0bydcbiAgfSxcbiAgW1Bvc2l0aW9uLlJJR0hUXToge1xuICAgIGhlaWdodDogJzEwMHZoJyxcbiAgICBtYXhXaWR0aDogJzEwMHZ3JyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICByaWdodDogMCxcbiAgICBsZWZ0OiAnYXV0bydcbiAgfSxcbiAgW1Bvc2l0aW9uLlRPUF06IHtcbiAgICB3aWR0aDogJzEwMHZ3JyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBtYXhIZWlnaHQ6ICcxMDB2aCcsXG4gICAgdG9wOiAwLFxuICAgIGJvdHRvbTogJ2F1dG8nXG4gIH0sXG4gIFtQb3NpdGlvbi5CT1RUT01dOiB7XG4gICAgd2lkdGg6ICcxMDB2dycsXG4gICAgbWF4SGVpZ2h0OiAnMTAwdmgnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGJvdHRvbTogMCxcbiAgICB0b3A6ICdhdXRvJ1xuICB9XG59XG5cbmNvbnN0IHN1YnBhbmVQcm9wcyA9IHtcbiAgW1Bvc2l0aW9uLkxFRlRdOiB7XG4gICAgaGVpZ2h0OiAnMTAwdmgnXG4gIH0sXG4gIFtQb3NpdGlvbi5SSUdIVF06IHtcbiAgICBoZWlnaHQ6ICcxMDB2aCdcbiAgfSxcbiAgW1Bvc2l0aW9uLlRPUF06IHtcbiAgICB3aWR0aDogJzEwMHZ3J1xuICB9LFxuICBbUG9zaXRpb24uQk9UVE9NXToge1xuICAgIHdpZHRoOiAnMTAwdncnXG4gIH1cbn1cblxuY29uc3QgYW5pbWF0aW9uRWFzaW5nID0ge1xuICBkZWNlbGVyYXRpb246IGBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSlgLFxuICBhY2NlbGVyYXRpb246IGBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDEsIDEpYFxufVxuXG5jb25zdCBBTklNQVRJT05fRFVSQVRJT04gPSAyNDBcblxuY29uc3Qgd2l0aEFuaW1hdGlvbnMgPSAoYW5pbWF0ZUluLCBhbmltYXRlT3V0KSA9PiB7XG4gIHJldHVybiB7XG4gICAgJyZbZGF0YS1zdGF0ZT1cImVudGVyaW5nXCJdLCAmW2RhdGEtc3RhdGU9XCJlbnRlcmVkXCJdJzoge1xuICAgICAgYW5pbWF0aW9uOiBgJHthbmltYXRlSW59ICR7QU5JTUFUSU9OX0RVUkFUSU9OfW1zICR7XG4gICAgICAgIGFuaW1hdGlvbkVhc2luZy5kZWNlbGVyYXRpb25cbiAgICAgIH0gYm90aGBcbiAgICB9LFxuICAgICcmW2RhdGEtc3RhdGU9XCJleGl0aW5nXCJdJzoge1xuICAgICAgYW5pbWF0aW9uOiBgJHthbmltYXRlT3V0fSAke0FOSU1BVElPTl9EVVJBVElPTn1tcyAke1xuICAgICAgICBhbmltYXRpb25FYXNpbmcuYWNjZWxlcmF0aW9uXG4gICAgICB9IGJvdGhgXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGFuaW1hdGlvblN0eWxlcyA9IHtcbiAgW1Bvc2l0aW9uLkxFRlRdOiB7XG4gICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWCgtMTAwJSlgLFxuICAgIC4uLndpdGhBbmltYXRpb25zKFxuICAgICAgY3NzLmtleWZyYW1lcygnYW5jaG9yZWRMZWZ0U2xpZGVJbkFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKC0xMDAlKWAgfSxcbiAgICAgICAgdG86IHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWCgwKWAgfVxuICAgICAgfSksXG4gICAgICBjc3Mua2V5ZnJhbWVzKCdhbmNob3JlZExlZnRTbGlkZU91dEFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKDApYCB9LFxuICAgICAgICB0bzogeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKC0xMDAlKWAgfVxuICAgICAgfSlcbiAgICApXG4gIH0sXG4gIFtQb3NpdGlvbi5SSUdIVF06IHtcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKDEwMCUpYCxcbiAgICAuLi53aXRoQW5pbWF0aW9ucyhcbiAgICAgIGNzcy5rZXlmcmFtZXMoJ2FuY2hvcmVkUmlnaHRTbGlkZUluQW5pbWF0aW9uJywge1xuICAgICAgICBmcm9tOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVgoMTAwJSlgIH0sXG4gICAgICAgIHRvOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVgoMClgIH1cbiAgICAgIH0pLFxuICAgICAgY3NzLmtleWZyYW1lcygnYW5jaG9yZWRSaWdodFNsaWRlT3V0QW5pbWF0aW9uJywge1xuICAgICAgICBmcm9tOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVgoMClgIH0sXG4gICAgICAgIHRvOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVgoMTAwJSlgIH1cbiAgICAgIH0pXG4gICAgKVxuICB9LFxuICBbUG9zaXRpb24uVE9QXToge1xuICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoLTEwMCUpYCxcbiAgICAuLi53aXRoQW5pbWF0aW9ucyhcbiAgICAgIGNzcy5rZXlmcmFtZXMoJ2FuY2hvcmVkVG9wU2xpZGVJbkFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKC0xMDAlKWAgfSxcbiAgICAgICAgdG86IHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgwKWAgfVxuICAgICAgfSksXG4gICAgICBjc3Mua2V5ZnJhbWVzKCdhbmNob3JlZFRvcFNsaWRlT3V0QW5pbWF0aW9uJywge1xuICAgICAgICBmcm9tOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoMClgIH0sXG4gICAgICAgIHRvOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoLTEwMCUpYCB9XG4gICAgICB9KVxuICAgIClcbiAgfSxcbiAgW1Bvc2l0aW9uLkJPVFRPTV06IHtcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKDEwMCUpYCxcbiAgICAuLi53aXRoQW5pbWF0aW9ucyhcbiAgICAgIGNzcy5rZXlmcmFtZXMoJ2FuY2hvcmVkQm90dG9tU2xpZGVJbkFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKDEwMCUpYCB9LFxuICAgICAgICB0bzogeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKDApYCB9XG4gICAgICB9KSxcbiAgICAgIGNzcy5rZXlmcmFtZXMoJ2FuY2hvcmVkQm90dG9tU2xpZGVPdXRBbmltYXRpb24nLCB7XG4gICAgICAgIGZyb206IHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgwKWAgfSxcbiAgICAgICAgdG86IHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgxMDAlKWAgfVxuICAgICAgfSlcbiAgICApXG4gIH1cbn1cblxuY2xhc3MgU2lkZVNoZWV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvKipcbiAgICAgKiBDaGlsZHJlbiBjYW4gYmUgYSBzdHJpbmcsIG5vZGUgb3IgYSBmdW5jdGlvbiBhY2NlcHRpbmcgYCh7IGNsb3NlIH0pYC5cbiAgICAgKi9cbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5mdW5jXSkuaXNSZXF1aXJlZCxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIFNpZGUgU2hlZXQgaXMgc2hvd24uXG4gICAgICovXG4gICAgaXNTaG93bjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGV4aXQgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBvbkNsb3NlQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBlbnRlciB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIG9uT3BlbkNvbXBsZXRlOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIG92ZXJsYXkgaXMgYWJvdXQgdG8gY2xvc2UuXG4gICAgICogUmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGUgc2hlZXQgZnJvbSBjbG9zaW5nLlxuICAgICAqIHR5cGU6IGBGdW5jdGlvbiAtPiBCb29sZWFuYFxuICAgICAqL1xuICAgIG9uQmVmb3JlQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogQm9vbGVhbiBpbmRpY2F0aW5nIGlmIGNsaWNraW5nIHRoZSBvdmVybGF5IHNob3VsZCBjbG9zZSB0aGUgb3ZlcmxheS5cbiAgICAgKi9cbiAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIEJvb2xlYW4gaW5kaWNhdGluZyBpZiBwcmVzc2luZyB0aGUgZXNjIGtleSBzaG91bGQgY2xvc2UgdGhlIG92ZXJsYXkuXG4gICAgICovXG4gICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIFdpZHRoIG9mIHRoZSBTaWRlU2hlZXQuXG4gICAgICovXG4gICAgd2lkdGg6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKS5pc1JlcXVpcmVkLFxuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyB0byBwYXNzIHRocm91Z2ggdGhlIFNpZGVTaGVldCBjb250YWluZXIgUGFuZS5cbiAgICAgKi9cbiAgICBjb250YWluZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgIC8qKlxuICAgICAqIFBvc2l0aW9ucyB0aGUgc2hlZXQgdG8gdGhlIHRvcCwgbGVmdCwgcmlnaHQsIG9yIGJvdHRvbSBvZiB0aGUgc2NyZWVuLlxuICAgICAqL1xuICAgIHBvc2l0aW9uOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgUG9zaXRpb24uVE9QLFxuICAgICAgUG9zaXRpb24uQk9UVE9NLFxuICAgICAgUG9zaXRpb24uTEVGVCxcbiAgICAgIFBvc2l0aW9uLlJJR0hUXG4gICAgXSkuaXNSZXF1aXJlZFxuICB9XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICB3aWR0aDogNjIwLFxuICAgIG9uQ2xvc2VDb21wbGV0ZTogKCkgPT4ge30sXG4gICAgb25PcGVuQ29tcGxldGU6ICgpID0+IHt9LFxuICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IHRydWUsXG4gICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzOiB0cnVlLFxuICAgIHBvc2l0aW9uOiBQb3NpdGlvbi5SSUdIVFxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHdpZHRoLFxuICAgICAgaXNTaG93bixcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgY29udGFpbmVyUHJvcHMsXG4gICAgICBvbk9wZW5Db21wbGV0ZSxcbiAgICAgIG9uQ2xvc2VDb21wbGV0ZSxcbiAgICAgIG9uQmVmb3JlQ2xvc2UsXG4gICAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrLFxuICAgICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzLFxuICAgICAgcG9zaXRpb25cbiAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxPdmVybGF5XG4gICAgICAgIGlzU2hvd249e2lzU2hvd259XG4gICAgICAgIHNob3VsZENsb3NlT25DbGljaz17c2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGlja31cbiAgICAgICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzPXtzaG91bGRDbG9zZU9uRXNjYXBlUHJlc3N9XG4gICAgICAgIG9uQmVmb3JlQ2xvc2U9e29uQmVmb3JlQ2xvc2V9XG4gICAgICAgIG9uRXhpdGVkPXtvbkNsb3NlQ29tcGxldGV9XG4gICAgICAgIG9uRW50ZXJlZD17b25PcGVuQ29tcGxldGV9XG4gICAgICA+XG4gICAgICAgIHsoeyBzdGF0ZSwgY2xvc2UgfSkgPT4gKFxuICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICB7Li4ucGFuZVByb3BzW3Bvc2l0aW9uXX1cbiAgICAgICAgICAgIGNzcz17YW5pbWF0aW9uU3R5bGVzW3Bvc2l0aW9uXX1cbiAgICAgICAgICAgIGRhdGEtc3RhdGU9e3N0YXRlfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxTaGVldENsb3NlXG4gICAgICAgICAgICAgIHBvc2l0aW9uPXtwb3NpdGlvbn1cbiAgICAgICAgICAgICAgZGF0YS1zdGF0ZT17c3RhdGV9XG4gICAgICAgICAgICAgIGlzQ2xvc2luZz17ZmFsc2V9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2Nsb3NlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICAgIGVsZXZhdGlvbj17NH1cbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIlxuICAgICAgICAgICAgICBvdmVyZmxvd1k9XCJhdXRvXCJcbiAgICAgICAgICAgICAgbWF4SGVpZ2h0PVwiMTAwdmhcIlxuICAgICAgICAgICAgICBkYXRhLXN0YXRlPXtzdGF0ZX1cbiAgICAgICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgICAgICB7Li4uc3VicGFuZVByb3BzW3Bvc2l0aW9uXX1cbiAgICAgICAgICAgICAgey4uLmNvbnRhaW5lclByb3BzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4oeyBjbG9zZSB9KSA6IGNoaWxkcmVufVxuICAgICAgICAgICAgPC9QYW5lPlxuICAgICAgICAgIDwvUGFuZT5cbiAgICAgICAgKX1cbiAgICAgIDwvT3ZlcmxheT5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2lkZVNoZWV0XG4iXX0=